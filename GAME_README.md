# 八字关系互动游戏 (Bazi Interactive Relationship Game)

一个基于传统中国八字命理学的互动教育游戏，帮助用户学习和识别八字中各种干支关系。

## 游戏特色

### 基础模式 (4柱)
- **传统八字排盘**: 年、月、日、时四柱
- **天干关系**: 相合、相冲
- **地支关系**: 六合、相冲、三合、三会、相刑、相害、相破
- **积分系统**: 根据关系类型和难度获得不同分数

### 高级模式 (6柱) - 新功能！
- **扩展排盘**: 传统四柱 + 大运 + 流年
- **大运计算**: 基于性别和年干自动计算10年运程
- **流年显示**: 当前年份的天干地支
- **奖励积分**: 涉及大运或流年的关系获得额外积分

## 游戏玩法

1. **选择模式**: 基础模式(4柱) 或 高级模式(6柱)
2. **开始游戏**: 系统随机生成八字排盘
3. **寻找关系**: 点击2-3个天干或地支字符
4. **获得积分**: 正确识别关系可获得相应分数
5. **完成游戏**: 找出所有关系完成当局游戏

## 关系类型详解

### 天干关系
- **相合**: 甲己、乙庚、丙辛、丁壬、戊癸 (10-15分)
- **相冲**: 甲庚、乙辛、丙壬、丁癸 (8-12分)

### 地支关系
- **六合**: 子丑、寅亥、卯戌、辰酉、巳申、午未 (12-18分)
- **相冲**: 子午、丑未、寅申、卯酉、辰戌、巳亥 (10-15分)
- **三合**: 申子辰(水)、寅午戌(火)、巳酉丑(金)、亥卯未(木) (20分)
- **三会**: 亥子丑(水)、寅卯辰(木)、巳午未(火)、申酉戌(金) (18分)
- **相刑**: 寅巳申、丑戌未、子卯 等 (15分)
- **相害**: 子未、丑午、寅巳、卯辰、申亥、酉戌 (12分)
- **相破**: 子酉、午卯、辰丑、戌未 (10分)

## 技术架构

### 后端 (Python Flask)
- **游戏引擎**: 基于现有八字计算代码库
- **关系检测**: 完整的干支关系验证系统
- **随机生成**: 智能八字排盘生成算法
- **API接口**: RESTful API支持前后端分离

### 前端 (HTML/CSS/JavaScript)
- **响应式设计**: 支持桌面和移动设备
- **交互界面**: 直观的点击选择操作
- **实时反馈**: 即时显示结果和解释
- **传统美学**: 中国传统文化风格设计

## 安装运行

### 环境要求
```bash
pip install Flask==2.3.3
pip install Flask-CORS==4.0.0
pip install bidict==0.22.1
pip install lunar-python==1.6.0
pip install colorama==0.4.6
```

或使用requirements.txt:
```bash
pip install -r requirements.txt
```

### 启动游戏
```bash
python game_app.py
```

然后在浏览器中访问: http://localhost:5000

## 文件结构

```
bazi2/
├── game_app.py          # Flask后端主程序
├── templates/
│   └── game.html        # 游戏前端界面
├── requirements.txt     # Python依赖包
├── GAME_README.md      # 游戏说明文档
├── simple_test.py      # 关系检测测试脚本
└── 现有八字计算模块:
    ├── bazi.py         # 八字排盘主程序
    ├── ganzhi.py       # 干支数据和关系定义
    ├── datas.py        # 基础数据和常量
    ├── common.py       # 通用工具函数
    └── ...
```

## 游戏截图功能

### 基础模式界面
- 4柱八字排盘展示
- 关系提示面板
- 实时得分统计
- 游戏进度条

### 高级模式界面
- 6柱排盘(含大运流年)
- 扩展关系检测
- 奖励积分系统
- 详细解释说明

## 教育价值

1. **命理学习**: 系统学习传统八字关系理论
2. **实践应用**: 通过游戏巩固理论知识
3. **文化传承**: 体验中华传统文化精髓
4. **逻辑思维**: 培养观察和分析能力

## 测试验证

运行测试脚本验证关系检测逻辑:
```bash
python simple_test.py
```

测试内容包括:
- 天干相合相冲关系
- 地支各种关系类型
- 三合三会模式识别
- 6柱模式关系检测

## 技术特点

1. **完整性**: 涵盖所有传统八字关系类型
2. **准确性**: 基于经典命理学理论实现
3. **扩展性**: 支持传统4柱和现代6柱模式
4. **智能性**: 自动计算大运流年关系
5. **教育性**: 提供详细的关系解释说明

## 未来扩展

- 添加更多关系类型(如神煞、纳音等)
- 支持多人对战模式
- 增加难度等级设置
- 添加学习模式和练习模式
- 支持自定义八字输入

---

这是一个结合传统文化与现代技术的教育游戏，旨在传承和普及中华优秀传统文化！